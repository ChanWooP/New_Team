<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="owner.hotel">

	<!-- default 처리해줘야 할 부분 찾아서 default 처리해주기, sequence 처리해줘야할 부분 찾아서 처리해주기 -->

	<!-- select all -->
	<select id="selectAll" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT h.hotelId, hotelName, granted, optNum, optName
		,
		optPrice, detail, mainPhoto, addr1, addr2, postcode, latitude,
		longitude
		, hotelPhotoNum, hotelPhotoName, prepareNum, prepareContent,
		h.typeNum
		, type, conNum, conName, conType, conOpenTime, conCloseTime
		FROM hotel h
		JOIN hotelAddOpt a
		ON h.hotelId = a.hotelId
		JOIN hotelDetail
		d
		ON h.hotelId = d.hotelId
		JOIN hotelPhoto ph
		ON h.hotelId = ph.hotelId
		JOIN hotelPrepare p
		ON h.hotelId = p.hotelId
		JOIN hotelType t
		ON
		h.typeNum = t.typeNum
		JOIN convenient c
		ON h.hotelId = c.hotelId
		WHERE
		h.hotelId=#{hotelId}
	</select>

	<!-- hotel table query -->
	<select id="selectHotel" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT hotelId, hotelName, granted, typeNum
		FROM hotel WHERE
		hotelId=#{hotelId}
	</select>

	<insert id="insertHotel"
		parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO hotel(hotelId, hotelName, granted, typeNum)
		VALUES #{userId}, #{hotelName}, #{granted}, #{typeNum}
	</insert>

	<update id="updateHotel"
		parameterType="com.sp.owner.hotel.Hotel">
		UPDATE hotel
		SET hotelName=#{hotelName},
		typeNum=#{typeNum}
		WHERE hotelId=#{hotelId}
	</update>

	<update id="updateGranted" parameterType="String">
		UPDATE hotel
		SET
		granted=1
		WHERE hotelId=#{hotelId}
	</update>

	<update id="updateRequest" parameterType="String">
		UPDATE hotel
		SET
		request=1
		WHERE hotelId=#{hotelId}
	</update>

	<delete id="deleteHotel" parameterType="String">
		DELETE FROM hotel
		WHERE
		hotelId=#{hotelId}
	</delete>



	<!-- hotelAddOpt table query -->
	<select id="selectHotelAddOpt" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT optNum, optName, optPrice, hotelId
		FROM hotelAddOpt
		WHERE hotelId=#{hotelId}
	</select>

	<insert id="insertHotelAddOpt"
		parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO hotelAddOpt(optNum, optName, optPrice,
		hotelId)
		VALUES(#{optNum}, #{optName}, #{optPrice}, #{userId})
	</insert>

	<update id="updateHotelAddOpt"
		parameterType="com.sp.owner.hotel.Hotel">
		UPDATE hotelAddOpt
		SET optName=#{optName},
		optPrice=#{optPrice}
		WHERE optNum=#{optNum}
	</update>

	<delete id="deleteHotelAddOpt" parameterType="String">
		DELETE FROM
		deleteHotelAddOpt
		WHERE hotelId=#{hotelId}
	</delete>



	<!-- hotelDetail table query -->
	<select id="selectHotelDetail" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT hotelId, detail, mainPhoto, addr1, addr2, postCode,
		latitude, longitude
		, hotelSize, hotelTel, hotelCreated, checkIn,
		checkOut, businessNum
		FROM hotelDetail
		WHERE hotelId=#{hotelId}
	</select>

	<insert id="insertHotelDetail"
		parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO hotelDetail(hotelId, detail, mainPhoto,
		addr1, addr2, postCode, latitude, longitude
		, hotelSize, hotelTel,
		hotelCreated, checkIn, checkOut, businessNum)
		VALUES(#{userId},
		#{detail}, #{mainPhoto}, #{addr1}, #{addr2},
		#{postCode}, #{latitude},
		#{longitude}
		, #{hotelSize}, #{hotelTel}, #{hotelCreated}, #{checkIn},
		#{checkOut},
		#{businessNum})
	</insert>

	<update id="updateHotelDetail"
		parameterType="com.sp.owner.hotel.Hotel">
		UPDATE hotelDetail
		SET detail=#{detail},
		mainPhoto=#{mainPhoto}, addr1=#{addr1}
		, addr2=#{addr2},
		postCode=#{postCode}, latitude=#{latitude},
		longitude=#{longitude}
		,
		hotelSize=#{hotelSize}, hotelTel=#{hotelTel},
		hotelCreated=#{hotelCreated}
		, checkIn=#{checkIn},
		checkOut=#{checkOut}, businessNum=#{businessNum}
		WHERE
		hotelId=#{hotelId}
	</update>

	<delete id="deleteHotelDetail" parameterType="String">
		DELETE FROM
		hotelDetail
		WHERE hotelId=#{hotelId}
	</delete>



	<!-- hotelPhoto table query -->
	<select id="selectHotelPhoto" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT hotelPhotoNum, hotelPhotoName, hotelId
		FROM
		hotelPhoto
		WHERE hotelId=#{hotelId}
	</select>

	<update id="updateHotelPhoto"
		parameterType="com.sp.owner.hotel.Hotel">
		UPDATE hotelPhoto
		SET hotelPhotoNum = #{hotelPhotoNum},
		hotelPhotoName=#{hotelPhotoName}
		WHERE hotelId=#{hotelId}
	</update>

	<insert id="insertHotelPhoto"
		parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO hotelPhoto(hotelPhotoNum, hotelPhotoName,
		hotelId)
		VALUES(#{hotelPhotoNum}, #{hotelPhotoName}, #{userId})
	</insert>

	<delete id="deleteHotelPhoto" parameterType="String">
		DELETE FROM
		hotlePhoto
		WHERE hotelId=#{hotelId}
	</delete>



	<!-- hotelPrepare table query -->
	<select id="selectHotelPrepare" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT hotelPrepareNum, hotelPrepareContent, hotelId FROM
		hotelPrepare
		WHERE hotelId=#{hotelId}
	</select>

	<insert id="insertHotelPrepare"
		parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO hotelPrepare(hotelPrepareNum,
		hotelPrepareContent, hotelId)
		VALUES(#{hotelPrepareNum},
		#{hotelPrepareContent}, #{userId})
	</insert>

	<update id="updateHotelPrepare"
		parameterType="com.sp.owner.hotel.Hotel">
		UPDATE hotelPrepare
		SET
		hotelprePareContent=#{hotelPrepareContent}
		WHERE hotelId=#{hotelId}
	</update>

	<delete id="deleteHotelPrepare" parameterType="String">
		DELETE FROM
		hotelPrepare
		WHERE hotelId=#{hotelId}
	</delete>



	<!-- hotelConvenient table query -->
	<select id="selectConvenient" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT conNum, conName, conType, conOpenTime, conCloseTime,
		hotelId
		FROM convenient
		WHERE hotelId=#{hotelId}
	</select>

	<insert id="insertConvenient"
		parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO convenient(conNum, conName, conType,
		conOpenTime, conCloseTime, hotelId)
		VALEUS(#{comNum}, #{conName},
		#{conType}, #{conOpenTime}, #{conCloseTime}, #{hotelId})
	</insert>

	<update id="updateConvenient"
		parameterType="com.sp.owner.hotel.Hotel">
		UPDATE convenient
		SET conName=#{conName}, #{conType},
		#{conOpenTime}, #{conClostTime}
		WHERE hotelId=#{hotelId}
	</update>

	<delete id="deleteConvenient" parameterType="String">
		DELETE FROM
		convenient
		WHERE hotelId=#{hotelId}
	</delete>



	<!-- room table query -->
	<select id="selectRoom" parameterType="String"
		resultType="com.sp.owner.hotel.Hotel">
		SELECT roomNum, roomName, stair, roomType, maxPeople, roomStatus, roomPrice, extraPrice, hotelId
		FROM room
		WHERE hotelId=#{hotelId}
	</select>

	<insert id="insertRoom" parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO room(roomNum,
		roomName, stair, roomType, maxPeople, roomStatus, roomPrice,
		extraPrice, hotelId)
		VALUES(#{roomNum}, #{roomName#}, #{stair},
		#{roomType}, #{maxPeople}, #{roomStatus}, #{roomPrice},
		#{extraPrice}, #{hotelId})
	</insert>

	<update id="updateRoom" parameterType="com.sp.owner.hotel.Hotel">
		UPDATE ROOM SET
		roomName=#{roomName}, stair=#{stair}, roomType=#{roomType},
		maxPeople=#{maxPeople}, roomStatus=#{roomStatus},
		roomPrice=#{roomPrice}, extraPrice=#{extraPrice}, hotelId=#{hotelId}
		WHERE roomNum=#{roomNum}
	</update>
	
	<delete id="deleteRoom" parameterType="String">
		DELETE FROM room
		WHERE roomNum=#{roomNum}
	</delete>
	
	
	
	<!-- roomDetail table query -->
	<select id="selectRoomDetail" parameterType="String" resultType="com.sp.owner.hotel.Hote">
		SELECT roomDetailNum, roomNum, roomDetails 
		FROM roomDetail 
		WHERE roomNum=#{roomNum}
	</select>
	
	<insert id="insertRoomDetail" parameterType="com.sp.owner.hotel.Hote">
		INSERT INTO roomDetail(roomDetailNum, roomNum, roomDetails)
		VALUES(#{roomDetailNum}, #{roomNum}, #{roomDetails})
	</insert>
	
	<update id="updateRoomDetail" parameterType="com.sp.owner.hotel.Hote">
		UPDATE roomDetail 
		SET roomDetails=#{roomDetails}
	</update>
	
	<delete id="deleteRoomDetail" parameterType="String">
		DELETE FROM roomDetail WHERE roomNum=#{roomNum}
	</delete>
	
	
	
	<!-- roomPhoto table query -->
	<select id="selectRoomPhoto" parameterType="String" resultType="com.sp.owner.hotel.Hotel">
		SELECT roomPhotoNum, roomPhotoName, roomNum 
		FROM roomPhoto 
		WHERE roomNum=#{roomNum}
	</select>
	
	<insert id="inserteRoomPhoto" parameterType="com.sp.owner.hotel.Hotel">
		INSERT INTO roomPhoto(roomPhotoNum, roomPhotoName, roomNum)
		VALUES(#{roomPhotoNum}, #{roomPhotoName}, #{roomNum})
	</insert>
	
	<update id="updateRoomPhoto" parameterType="com.sp.owner.hotel.Hote">
		UPDATE roomPhoto SET roomPhotoName=#{roomPhotoName}
	</update>
	
	<delete id="deleteRoomPhoto" parameterType="String">
		DELETE FROM roomPhoto WHERE  roomPhotoNum=#{roomPhotoNum}
	</delete>
</mapper>